{% extends "layout.html" %}

{% block body %}

<h2 class="pr_h1">User {{ profile_user.username }}</h2>


<!--hidden form to create or edit the bio-->
{% if request.user == profile_user %}
<form id="bio" method="post" style="display: none;">
    {% csrf_token %}
    <input name="bioo" placeholder="your bio.." value="{{ profile.bio }}">
    <button type="submit">Save</button>
</form>
{% endif %}


<!--profile information card -- from bootstrao witgh my own code mixed-->
<div class="card text-white bg-dark mb-3" style="max-width: 18rem;">
  <div class="card-header">Your information</div>
  <div class="card-body">
    {% if profile.bio %}
    <h5 class="card-title">Bio: {{ profile.bio }}</h5>
    {% endif %}
<!--showing the join date-->
    <p class="card-text">Joined in: {{ profile.create_time }}</p>
  </div>
</div>

<!--edit or add button dependin on if u have text in your bio or not -->
    {% if request.user == profile_user %}
    {% if profile.bio %}
        <button id="edit-bio">Edit bio</button>
    {% endif %}
    {% else %}
    <p>no bio, you can add one</p>
        <button id="add-bio">add bio</button>
    {% endif %}

    <!--cases displayed-->
    <!-- used the same design i used on posts on cases-->
    <h3 class="pr_h1" >Cases</h3>

    {% if cases %}
    {% for case in cases %}
    <div class="card text-white bg-dark mb-3 w-75 mx-auto">
    <div class="card-body">
      <h5 class="card-title"><a href="{% url 'case_detail' case.id %}" class="text-success">{{ case.title }}</a></h5>
      {% if case.is_public %}
      <p class="card-text"><span style="color: #39ff14;">Public</span>
      {% else %}
      <span style="color:#ff1414">private</span>
      {% endif %}</p>
    </div>
  </div>
  {% endfor %}
{% else %}
  <p class="text-center">You have no cases</p>
{% endif %}


<!--showing the posts from the user themselves-->
<h3 class="pr_h1">Posts</h3>

{% for post in posts %}
  <div class="card text-white bg-dark mb-3 w-75 mx-auto">
    <div class="card-body">
      <h5 class="card-title">{{ post.title }}</h5>
      <p class="card-text">{{ post.body }}</p>
      <p class="card-text">
        <a href="{% url 'country' post.country %}" class="text-success">{{ post.country }}</a> - {{ post.city }}
      </p>
      <p class="card-text">#{{ post.tags }}</p>
    </div>
  </div>
{% empty %}
  <p class="text-center">You have no posts</p>
{% endfor %}


<!--hiding the form showing it when the user presses the button to see it-->
<script>
    const add = document.getElementById('add-bio');
    const edit = document.getElementById('edit-bio');
    const form = document.getElementById('bio');

    if (add) add.onclick = () => {
        form.style.display = 'block';
        add.style.display = 'none';
    }
    if (edit) edit.onclick = () => {
        form.style.display = 'block';
        edit.style.display = 'none';
    }
</script>

{% endblock %}